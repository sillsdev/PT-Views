Ref	disable	element	style	rank	test	test2	nextstyle1	nextstyle2	class-extra	class	message	note	Valid_occurance	Invalid_occurance	note_prior	note_prior_prior
1.1		para	b3	8	not(verse)				mid	err-para-b3-mid-1-1	A \\b3 paragraph must contain a \\v.	SC 22 Dec: I've added some requests in Instructions	XXD  1:1		SC: 16 Dec: I've started marking the Ref number green background to say we are good to go for this test.	
1.2		para	p	8	not(verse)				mid	err-para-p-mid-1-2	A \\p paragraph must contain a \\v.		XXD  1:1			
1.3	TRUE	verse	v		not($parent = 'p')	not($parent = 'b3')				err-verse-v--1-3	\\v must be in a \\p or \\b3			-		
2.1	TRUE									err----2-1	This is not used			-		
3.1	TRUE	table			not(following-sibling::*[2][@style = 's5'] )					err-table---3-1	The \\tr is not followed by a \\s5 after a \\ntn	SC 22 Dec: Refinement: It is incorrect to have the \s5 above a \tr, \b or not.		-		
3.21	TRUE	para	p		$next1-3-21 > $next2-3-21		s5	p		err-para-p--3-21	A \\p containg a \\v must have a \\s5 following it	SC 22 Dec: See XXD 3.6, \p \v \n1 sequence should be flagged. Also a \p \v \b \n1 sequence s/b flagged too.		-		
3.22	TRUE	para	b3		$next1-3-22 > $next2-3-22		s5	b3		err-para-b3--3-22	A \\b3 containg a \\v must have a \\s5 following it	SC 22 Dec: Ditto above but for \b3 ...		-		
4.1	TRUE	table			not(preceding-sibling::*[1][@style = 'b'])					err-table---4-1	The \\tr should be preceeded by a \\b	(SC: redundant with 7.3)		-		
4.2		row	tr		cell[2]/@style = 'tc1'					err-row-tr--4-2	The second column must be a \\tc2 in \\tr		XXD  1:2			
4.3		row	tr		cell[1]/@style = 'tc2'					err-row-tr--4-3	The first column must be a \\tc1 in \\tr		XXD  1:3			
4.4		cell	tc1		count(following-sibling::cell) = 0 and @style = 'tc1'	not(*[@style = 'sbx'] or contains(text(),'Paragraph'))			mid	err-cell-tc1-mid-4-4	A \\tc1 must contain either an \\sbx or the word Paragraph		xxd 1:4			
4.5	TRUE	char	sbx	2	following-sibling::*[2][@style = 'sbx']	not(following-sibling::node()[1]/@style = 'tbb']				err-char-sbx--4-5	A \\tbb must follow a \\sbx	(SC: redundant with 4.7 & 4.8)		-		
4.6	TRUE	char	sbx		not(following-sibling::*[2][@style = 'sbx'] and following-sibling::*[1][@style = 'tbb'])	not(*[@style = '+tbb'])				err-char-sbx--4-6	The parts of the \\sbx should be separated by a \\+tbb __\\+tbb*.	(SC: redundant with 4.7 & 4.8)		-		
4.7		cell	tc1		$countsbx > 1	$counttbb + 1 != $countsbx			mid	err-cell-tc1-mid-4-7	These \\sbx should be separated by \\tbb ...\\tbb*		XXD 1:5			
4.8		cell	tc1		$countsbx = 1	count(*/*[@style = '+tbb']) = 0 and $counttbb = 0			mid	err-cell-tc1-mid-4-8	The parts of the \\sbx should be separated by a \\+tbb __\\+tbb*.		XXD 1:5			
4.9		cell	tc1	5	$countprenode > 1					err-cell-tc1--4-9	A \\tc1 can only occur as the first SFM in a \\tr.	2023-03-27 addded to show instead of 4.4 in XXD 1:2 first \tr	XXD 1:2			
5.1	TRUE	para	s5		pre=b3				pre	err-para-s5-pre-5-1	A \\b3 must occur before a \\s5	SC 22 Dec: I put in an example for this test at xxd 5.1		-		
5.2	TRUE									err----5-2	nothing	SC 22 Dec: Like 5.1, this test should be written for \s5 and  \p. I put in an example for this test at xxd 105.1		-		
6.1		table			$containspart and $hasfollowingtable	$notposttabledivision			post	err-table--post-6-1	When you have a Part Box, a Division Box must occur after the Part summary.		XXD 6:2			
6.11	TRUE	char	sbx		contains(text(),'Section ')	not(containing(preceding::row[1]//*[1]/text(),'Division')				err-char-sbx--6-11	When you have a '\\tr \tc1 \\sbx Part ...' the following \\tr should have have '\\tr \tc1 \\sbx Division ...'			-		
6.2		table			$containsdivision and $hasfollowingtable	$notposttablesection			post	err-table--post-6-2	When you have a Division Box, a Section Box must occur after the Division summary.		XXD 6:3			
6.3		table			$containssection and $hasfollowingtable	$notposttableparagraph			post	err-table--post-6-3	When you have a Section Box, a Paragraph Box must occur after the Section summary.		XXD 6:4,5			
6.4	TRUE	row	tr		$hastrpart and not($parentpresib2 = 'c')	not($parentpresib = 'b' or ($parentpresib2 = 'b' and $parentpresib = 'b3') or ($parentpresib2 = 'b' and $parentpresib = 'p'))			pre	err-row-tr-pre-6-4	A \\tr must be preceded by a \\b immediately before it or before the \\b3 or \\p above it.		XXD 6:4	-		
6.5	TRUE	row	tr		$hastrdivision and not($parentpresib2 = 'c')	not($parentpresib = 'b' or ($parentpresib2 = 'b' and $parentpresib = 'b3') or ($parentpresib2 = 'b' and $parentpresib = 'p'))			pre	err-row-tr-pre-6-5	A \\tr must be preceded by a \\b imediately before or before the \\b3 or \\p		XXD 7:10	-		
6.6	TRUE	row	tr		$hastrsection and not($parentpresib2 = 'c')	not($parentpresib = 'b' or ($parentpresib2 = 'b' and $parentpresib = 'b3') or ($parentpresib2 = 'b' and $parentpresib = 'p'))			pre	err-row-tr-pre-6-6	A \\tr must be preceded by a \\b imediately before or before the \\b3 or \\p		XXD 7:11	-		
6.7	TRUE	row	tr		$hastrparagraph and not($parentpresib2 = 'c')	not($parentpresib = 'b' or ($parentpresib2 = 'b' and $parentpresib = 'b3') or ($parentpresib2 = 'b' and $parentpresib = 'p'))			pre	err-row-tr-pre-6-7	A \\tr must be preceded by a \\b imediately before or before the \\b3 or \\p			-		
6.8		row	tr		$containspart or $containsdivision or $containssection	not($parentpostsib = 'ntn')			post	err-row-tr-post-6-8	An \\ntn must follow a Part, Division or Section Box.		XXD 6:9			
6.9	TRUE	row	tr		$hastrdivision	not($parentpostsib = 'ntn')			post	err-row-tr-post-6-9	An \\ntn must follow a Division Box.		XXD 6:8	-		
6.11	TRUE	row	tr		$hastrsection	not($parentpostsib = 'ntn')			post	err-row-tr-post-6-11	An \\ntn must follow a Section Box.		XXD 6:7	-		
7.1.1		para	b3		$posttable and $presib2 = 'c'	$presib = 'b'			pre	err-para-b3-pre-7-1-1	A \\b para should not precede a \\b3 paragraph at the start of a chapter.		XXD 7:1, 4:1, 8:1			
7.1.2		para	p		$posttable and $presib2 = 'c'	$presib = 'b'			pre	err-para-p-pre-7-1-2	A \\b para should not precede a \\p paragraph at the start of a chapter.		XXD 17:1, 18:1			
7.1.3		para	b3		$postsib = 'b'				post	err-para-b3-post-7-1-3	A \\b should be before a \\b3, not after it.	SC 21 Mar: I've rethought this and want to reverse this and 7.1.4 so that a \b should precede the \p or \b3. 	XXD 7.2,3			
7.1.4		para	p		$postsib = 'b'				post	err-para-p-post-7-1-4	A \\b should be before a \\p, not after it.		XXD 17:2,3			
7.2		table			($containsdivision or $containspart or $containssection or $containsparagraph) and not($presib2 = 'c')	not($presib = 'b' or ($presib2 = 'b' and $presib = 'b3') or ($presib2 = 'b' and $presib = 'p'))			pre	err-table--pre-7-2	A \\b must precede a \\p or \\b3 paragraph and a Part, Division, Section or Paragraph Box, except at v.1.	SC 21 Mar: As per above note, it should be \b then \p \v then \tr.... But if there is a Part (7.4), the \p \v will be above the Part tr rather than the Division tr.	XXD 7:10			
7.3	TRUE	table			$containssection and not($presib2 = 'c')	pre=p b3 b			pre	err-table--pre-7-3	A \\b must precede a \\p or \\b3 paragraph and a Section Box, except at v.1.	ditto above, but if there is a Division, the \p \v will be above the Division rather than the Section	XXD 7:11	-		
7.4	TRUE	table			contains(row[1]/cell[1]/char[1]/text(),'Part') and not($presib2 = 'c')	pre=p b3 b			pre	err-table--pre-7-4	A \\b must precede a \\p or \\b3 paragraph and a Part Box, except at v.1.	ditto above	XXD 7:12	-		
7.5	TRUE	table			contains(row[1]/cell[1]/text(),'Paragraph') and not($presib2 = 'c')	pre=p b3 b			pre	err-table--pre-7-5	A \\b must precede a \\p \\v and a Paragraph Box, except for verse 1.	ditto above	XXD 7:13	-		
7.6	TRUE	table			contains(row[1]/cell[1]/char[1]/text(),'Division') and not(following-sibling::*[1][name() = 'chapter'])	post=s5 tr ntn			post	err-table--post-7-6	A \\s5 must follow a \\tr \\tc1 Division if there is no Section Box below it.	SC 22 Mar : messages for 7.6-9 changed.		-		
7.7	TRUE	table			contains(row[1]/cell[1]/char[1]/text(),'Section') and not(following-sibling::*[1][name() = 'chapter'])	post=s5 tr ntn			post	err-table--post-7-7	A \\s5 paragraph must follow a \\tr \\tc1 Section if there is no Paragraph Box below it.			XXD 1:13		
7.8	TRUE	table			contains(row[1]/cell[1]/char[1]/text(),'Part') and not(following-sibling::*[1][name() = 'chapter'])	post=s5 tr ntn			post	err-table--post-7-8	A \\s5 paragraph must follow a \\tr \\tc1 Part if there is no Division Box below it.		XXD 26:1	-		
7.9	TRUE	table			contains(row[1]/cell[1]/text(),'Paragraph') 	post=s5 tr ntn			post	err-table--post-7-9	A \\tr Paragraph Box needs a \\s5, \\tr, or \\ntn after it.		XXD 26:1	-		
7.10.1		para	p		not($presib = 'c') and $posttable	not($presib = 'b' or ( $presib = 'rem' and $presib2 = 'b'))			pre	err-para-p-pre-7-10-1	When \\tr follows \\p then a \\b should precede \\p (except @ v.1).		XXD 7:10			
7.10.2		para	b3		not($presib = 'c') and $posttable	not($presib = 'b' or ( $presib = 'rem' and $presib2 = 'b'))			pre	err-para-b3-pre-7-10-2	When \\tr follows \\b3 then a \\b should precede \\p (except @ v.1).		XXD 7:10-13			
8.1		para	s5		$hascvref and $numbfirst 	$refchapcolon != $prechapter			mid	err-para-s5-mid-8-1	The chapter number in this \\s5 should match the current chapter number.		XXD 8:1			
8.1.2	TRUE	para	s5		$hascvref and $numbfirst and not($hasvlet)					err-para-s5--8-1-2				-		
8.21		para	s5		not($prevhyphen) and not($refvendash) and not($hasvlet)	$refcolonv != $preverse			mid	err-para-s5-mid-8-21	The verse number in this \\s5 should match the current verse number.		XXD 8:2			
8.21.2		para	s5		not($prevhyphen) and not($refvendash) and $hasvlet	$refcolonvlet != $preverse			mid	err-para-s5-mid-8-21-2	The verse number in this \\s5 should match the current verse number.		8:20 (\s5 8:19c)			
8.22		para	s5	5	not($prevhyphen) and $refvendash and not($hasvlet)	$refcolonvr1 != $preverse			mid	err-para-s5-mid-8-22	The first verse number in the range in this \\s5 should match current verse number.		XXD 8:2			SC 5 Dec: Please make the message read: 'This verse part is invalid (a–h allowed)'. Also, the tag error number is wrong (#8.21 s/b #8.22). Also, I added a 'note' column in Instructions and a note on #8 there.
8.23		para	s5		$prevhyphen and $refvendash	$refcolonvr1 != $preverser1			mid	err-para-s5-mid-8-23	The first verse number in the range in this \\s5 should match the first number of current verse range.		XXD 8:3-5			
8.24	TRUE	para	s5		contains(.,'.')					err-para-s5--8-24	This \\s5 should not contain a period.	SC 5 Dec: This test looks redundant to 8:25. Delete?		-		
8.25		para	s5	10	not(contains(.,':'))				mid	err-para-s5-mid-8-25	This \\s5 must contain a colon between the chapter and verse.		XXD 8:6			
8.26		para	s5		contains($preverse,'-') and not(contains(.,'–'))	not((translate(substring-after(.,':'),$letlc,'') = substring-before($preverse,'-') or  translate(substring-after(.,':'),$letlc,'') > substring-before($preverse,'-')) and ( translate(substring-after(.,':'),$letlc,'') = substring-after($preverse,'-') )or  translate(substring-after(.,':'),$letlc,'') < substring-after($preverse,'-') )			mid	err-para-s5-mid-8-26	The verse number in this \\s5 must be within the current verse range.		XXD 8:16-17			
8.3		para	s5		string-length(translate(.,$validcvnumbletpunc,'')) > 0	not($hasreordered)			mid	err-para-s5-mid-8-3	This \\s5 reference has invalid character(s) (Numbers, colon, en dash, and letters a–j allowed).	SC 22 Dec: Can we make this go to 10 (a-j) rather than 8 (a-h)? 	XXD 8:18			
8.3.1		para	s5		string-length(translate(text()[1],$validreorderedcvnumbletpunc,'')) > 0	$hasreordered and $hastbb			mid	err-para-s5-mid-8-3-1	This \\s5 reference has invalid character(s) (Numbers, colon, en dash, comma, and letters a–j allowed).					
8.3.2		para	s5		string-length(translate(.,$validreorderedcvnumbletpunc,'')) > 0	$hasreordered and not($hastbb)			mid	err-para-s5-mid-8-3-2	This \\s5 reference is reordered and does not contain a \\tbb between the verse reference and the (reordered) part.					
8.4.1		cell	tc1		$hasspacecref and $hascvref and not(contains($preverse,'-')) and contains(.,'–') and $notsbxchild	$refcolonvr1 != $preverse			mid	err-cell-tc1-mid-8-4-1	The first verse of the range in this Paragraph Box does not match the preceding verse number.		XXD 8:20			
8.4.2		cell	tc1		$hascvref and not(contains($preverse,'-'))  and not(contains(.,'–'))	$refcolonvnumb != $preverse			mid	err-cell-tc1-mid-8-4-2	The verse in this \\tc1 Paragraph Box does not match the preceding verse number.		XD 1:15			
8.4.3		char	sbx		$hascvref and not(contains($preverse,'-')) and contains(.,'–')	$refcolonvr1 != $preverse			mid	err-char-sbx-mid-8-4-3	The first verse of the range in this \\sbx does not match the preceding verse number.		XXD 8:20			
8.4.4		char	sbx		$hascvref and not(contains($preverse,'-'))  and not(contains(.,'–'))	$refcolonv != $preverse			mid	err-char-sbx-mid-8-4-4	The verse in this \\sbx does not match the preceding verse number.		XXD 1:13 but hidden by #9.6			
8.4.5		char	sbx		$hasspacecref  and $hascvref 	$refwordschapcolon != $prechapter			mid	err-char-sbx-mid-8-4-5	The chapter in this \\sbx does not match the preceding verse number.		XXD 8:19			
8.4.6		cell	tc1		$hasspacecref and $hascvref 	$refwordschapcolon != $prechapter			mid	err-cell-tc1-mid-8-4-6	The chapter in this \\tc1 does not match the preceding verse number.	excludes if contains sbx	XXD 8:19			
8.4.7		char	sbx		$numbfirst and $hascvref	$refchapcolon != $prechapter			mid	err-char-sbx-mid-8-4-7	The chapter in this \\sbx does not match the preceding verse number.		XXD 23:1, 4:1			
8.4.8		cell	tc1		$numbfirst and $hascvref	$refchapcolon != $prechapter			mid	err-cell-tc1-mid-8-4-8	The chapter in this \\tc1 does not match the preceding verse number.	Not sure this ever occurs	XXD 8:3-5			
9.1		para			contains(translate(.,$numb,$numbsub),'#:#')	contains(translate(translate(.,$letlc,''),$numb,$numbsub),'#-#')			mid	err-para--mid-9-1	The hyphen in a verse range in this paragraph should be an en dash.		XXD 9:1-3		SC 5 Dec: XXD 1:11 has several examples that should be flagged but are not.	
9.11	TRUE	cell	tc1	8	$hascvref	contains(translate(translate(.,$letlc,''),$numb,$numbsub),'#-#')				err-cell-tc1--9-11	The hyphen in the verse range in this \\tc1 should be an en dash.			-		
9.12	TRUE	char	sbx		$hascvref and contains(translate(translate(.,$letlc,''),$numb,$numbsub),'#-#')					err-char-sbx--9-12	The hyphen in the verse range in this \\sbx should be an en dash.	SC 22 Dec: yes, delete this test.		-	SC 15 Dec: Since rule 9.11 and 9.12 catch the mistake at XXD 1:13, maybe we don't need this rule?	
9.13	TRUE	para	n1		$hascvref	contains(translate(.,$validcvnumblet,$validcvnumbletsub),'$-$') or contains(translate(.,$validcvnumblet,$validcvnumbletsub),'$-#') or contains(translate(.,$validcvnumblet,$validcvnumbletsub),'#-#')				err-para-n1--9-13	The hyphen in a range in this paragraph should be an en dash.	SC 22 Dec: not working.		-		
9.14	TRUE	para	n2		$hascvref	contains(translate(.,$validcvnumblet,$validcvnumbletsub),'$-$') or contains(translate(.,$validcvnumblet,$validcvnumbletsub),'$-#') or contains(translate(.,$validcvnumblet,$validcvnumbletsub),'#-#')				err-para-n2--9-14	The hyphen in a range in this paragraph should be an en dash.			-		
9.15	TRUE	para	n3		$hascvref	contains(translate(.,$validcvnumblet,$validcvnumbletsub),'$-$') or contains(translate(.,$validcvnumblet,$validcvnumbletsub),'$-#') or contains(translate(.,$validcvnumblet,$validcvnumbletsub),'#-#')				err-para-n3--9-15	The hyphen in a range in this paragraph should be an en dash.			-		
9.16	TRUE	para	s5	8	$hascvref	contains(translate(.,$validcvnumblet,$validcvnumbletsub),'$-$') or contains(translate(.,$validcvnumblet,$validcvnumbletsub),'$-#') or contains(translate(.,$validcvnumblet,$validcvnumbletsub),'#-#')				err-para-s5--9-16	The hyphen in a range in this paragraph should be an en dash.			-		
9.17	TRUE	para	ntn		$hascvref	contains(translate(.,$validcvnumblet,$validcvnumbletsub),'#-#')				err-para-ntn--9-17	The hyphen in a range in this paragraph should be an en dash.			-		
9.2		verse	v		contains(@number,'–')				mid	err-verse-v-mid-9-2	The en dash in the verse range in this \\v should be a hyphen.		XXD 9:1-3			
9.3		verse	v		contains(translate(@number,$validcvnumblet,$validcvnumbletsub),'#$-#') or contains(translate(@number,$validcvnumblet,$validcvnumbletsub),'#$')				mid	err-verse-v-mid-9-3	A \\v cannot have verse parts in it.		XXD 9:1-3		SC 5 Dec: This test is not working, see XXD 1:20. 	
9.4	TRUE	verse	v		contains(translate(@number,$validcvnumblet,$validcvnumbletsub)),'#$')					err-verse-v--9-4	A verse number can't have a verse part letter unless it is in a range.	SC 22 Dec: OK, it looks like rule 9.3 catches all the scenarios I was thinking of.		-	SC 16 Dec: Paratext does not want a letter anywhere in the verse field after the \v. Maybe make 9:3 more general to not allow a letter anywhere in the verse field? Actually, the only allowable characters are digits and the hyphen (between two sets of digits, not at the end, i.e., 23-, or at the beginning).	
9.5		cell			contains(translate(text(),$numb,$numbsub),'#:#')	contains(translate(translate(.,$letlc,''),$numb,$numbsub),'#-#')			mid	err-cell--mid-9-5	The hyphen in a verse range in this \\tr \\tc1 should be an en dash.		XXD 9:5 1:12			
9.6		char			contains(translate(.,$numb,$numbsub),'#:#')	contains(translate(translate(.,$letlc,''),$numb,$numbsub),'#-#')			mid	err-char--mid-9-6	The hyphen in a verse range in this paragraph should be an en dash.		XXD 9:6			
10.1		para	n1	5	$counttec > 1				mid	err-para-n1-mid-10-1	There should be only one \\tec per \\n1 paragraph.		XXD 10:1 first \n1			
10.1.2		para	n2	5	$counttec > 1				mid	err-para-n2-mid-10-1-2	There not should be two or more \\tec in a \\n2 paragraph.		XXD 10:1 first \n2			
10.1.3		para	n3	5	$counttec > 1				mid	err-para-n3-mid-10-1-3	There should be only one \\tec per \\n3 paragraph.		XXD 10:1 first \n3			
10.1.4		para	n1	5	$counttec + $countteu  = 0 				mid	err-para-n1-mid-10-1-4	This paragraph is missing a \\tec ...\\tec* or \\teu		XXD 10:1 second \n1			
10.1.5		para	n3	5	$counttec = 0	$counttrs = 0			mid	err-para-n3-mid-10-1-5	This paragraph is missing a \\tec ...\\tec*		XXD 10:1 second \n3			
10.2.1		char	tec		$countpresibnode > 0				mid	err-char-tec-mid-10-2-1	The \\tec ...\\tec* markup should be at the start of the paragraph.		XXD 10:2			
10.2.2		para	n3	5	$node1tec and $counttec = 1	$validtecfirst != '$'			mid	err-para-n3-mid-10-2-2	There should be text in \\tec formatting at the beginning of this paragraph		XXD 10:2 last \n3			
10.2.3		char	tec	5	$countpretec > 0				pre	err-char-tec-pre-10-2-3	This \\tec should not be here. There should be only one \\tec ...\\tec* at the start of this paragraph.		XXD 10:1			
10.31		char	tec	5	$lastchar = ' '				mid	err-char-tec-mid-10-31	The last character of this \\tec should be a colon, not a space.		XXD 10:3 first two \n1			
10.32		char	tec	3	not($lastchar = ':')				mid	err-char-tec-mid-10-32	The last character of this character markup \\tec should be a colon.		XXD 10:3 last two \n1			
10.33	TRUE	char	tec		not(contains(text()[last()],':'))				mid	err-char-tec-mid-10-33	This \tec does not contain an ending colon.	SC 16 Dec: This test seems redundant with 10:32		-		
10.4		char	trs		not(preceding-sibling::*[@style = 'tec']) 	not($parent = 'f' or $parent = 'n2' or $parent = 'li1')			mid	err-char-trs-mid-10-4	A \\tec should precede this \\trs in the paragraph.	SC 23 Mar: Caught by #10.6	XXD 10:4			
10.5		char	tei		$countpren1 > $countpres5 or $parentpresibpos > $countpres5 	contains($pren1tec,text()) and not($parent = 'p') and not($parent = 'f') and not($parent = 'qp') and not($parent = 'qns')			mid	err-char-tei-mid-10-5	Any repeat of the words found in the preceding \\tec should be in \\trs not in \\tei.		XXD 10:5			
10.6		char	trs		not($hasellipsis)	not(contains($pretec,.))			mid	err-char-trs-mid-10-6	The word/phrase in this \\trs is not found in the closest preceding \\tec, or is misspelled or has wrong capitalization.		XXD 10:4,6			
10.6.1		char	trs		$hasellipsis	not(contains($pretec,$preellipsisstring) and contains($pretec,$postellipsisstring))			mid	err-char-trs-mid-10-6-1	The word/phrase in this \\trs are not found in the closest preceding \\tec		XXD 10:6			
11.1		char	tec		translate(substring(.,1,1),$invalidtecfirstpunc,'%%') = '%'				mid	err-char-tec-mid-11-1	The first character should not be punctuation unless you are specifically talking about that punctuation		XXD 11:1		SC 5 Dec: not working. See XXD  1:22	
11.2		char	tec		translate($lastchar2,$invalidtecendpunc,$invalidtecendpuncsub) = '%'				mid	err-char-tec-mid-11-2	The last character before the colon should not be punctuation unless it is a question or exclamation mark or an end quote mark needed for the Note.		XXD 11:2			
11.2.1	TRUE	char	tec	5	contains(.,$sq)				mid	err-char-tec-mid-11-2-1	This \\tec contains a straight single quote.	see 26.2		-		
11.2.2	TRUE	char	tec	5	contains(.,$dq)				mid	err-char-tec-mid-11-2-2	This \\tec contains a straight double quote.	see 26.2		-		
12.1		para	n1		$counttec > 0 and contains($pren1tec,$curtec)	$countpres5 < $countpren1			mid	err-para-n1-mid-12-1	The contents of this \\n1 \\tec is a portion of the previous \\n1 \\tec. Perhaps this should be an \\n2?		XXD 1:26		SC 5 Dec: not working. See XXD  1:24-6	
12.2		para	n2	8	child::*[@style = 'tec'] and contains($pren2tec,$curtec)	$countpren1 < $countpren2tec and $countpres5 < $countpren2tec			mid	err-para-n2-mid-12-2	The contents of this \\n2 \\tec is a portion of the previous \\n2 \\tec. Perhaps this should be an \\n3?		XXD 1:26		SC 16 Dec: message wording changed.	
12.3	TRUE	para	n3	3	child::*[@style = 'tec'] and contains($pren3tec,$curtec)	$countpres5 < $countpren3				err-para-n3--12-3	The contents of this \\n3 \\tec should not be in the previous \\n3 \\tec	SC 16 Dec: Remove this test. Sometimes we will get repeats here because there is no n4.		-		
12.4	TRUE	para	n1		not(contains(*[@style = 'tec'][1],following-sibling::*[@style = 'n2'])/*[@style = 'tec'])					err-para-n1--12-4	nothing			-		
12.5	TRUE	para	n2		not(contains(*[@style = 'tec'][1],following-sibling::*[@style = 'n3'])/*[@style = 'tec'])					err-para-n2--12-5	nothing			-		
12.6		para	n3	5	not(contains($pren2tec,$curtec) or contains($pren1tec,$curtec))	$hastecchild and not($hastecversion) and not($hastecellipsis)			mid	err-para-n3-mid-12-6	The contents of this \\n3 \\tec is not found in the preceding  \\n2 or preceding \\n1 \\tec.		XXD 12:2			
12.6.1		para	n3	5	not((contains($pren2tec,$curtecpreellipsis) and contains($pren2tec,$curtecpostellipsis)) or (contains($pren1tec,$curtecpreellipsis) and contains($pren1tec,$curtecpostellipsis)))	$countpres5 < $countpren2 and $countpres5 < $countpren1 and $hastecellipsis and $hastecchild and not($hastecversion)			mid	err-para-n3-mid-12-6-1	The contents of this \\n3 \\tec is not found in the preceding  \\n2 or preceding \\n1 \\tec.		XXD 12:6			
12.6.2		para	n3		not((contains($pren2tec,$curtecverpreellipsis) and contains($pren2tec,$curtecpostellipsis)) or (contains($pren1tec,$curtecverpreellipsis) and contains($pren1tec,$curtecpostellipsis)))	$hastecellipsis and $hastecchild  and $hastecversion			mid	err-para-n3-mid-12-6-2	The contents of this \\n3 \\tec is not found in the preceding  \\n2 or preceding \\n1 \\tec.					
12.6.3		para	n3		not(contains($pren2tec,$curtecver) or contains($pren1tec,$curtecver))	not($hastecellipsis) and $hastecchild and $hastecversion			mid	err-para-n3-mid-12-6-3	The contents of this \\n3 \\tec is not found in the preceding  \\n2 or preceding \\n1 \\tec.					
12.7		para	n2	5	not(contains($pren1tec,$curtec))	$countpres5 < $countpren1 and $hastecchild and not($hastecellipsis) and not($hastecversion)			mid	err-para-n2-mid-12-7	The contents of this \\n2 \\tec is not found in the preceding  \\n1 \\tec.		XXD 1:26,27			
12.7.1		para	n2	5	not(contains($pren1tec,$curtecpreellipsis) and contains($pren1tec,$curtecpostellipsis)) 	$countpres5 < $countpren1 and $hastecchild and $hastecellipsis and not($hastecversion)			mid	err-para-n2-mid-12-7-1	The contents of this \\n2 \\tec is not found in the preceding  \\n1 \\tec.		XXD 12:7			
12.7.2	TRUE	para	n2			$countpres5 < $countpren1 and $hastecchild and not($hastecellipsis)			mid	err-para-n2-mid-12-7-2	The contents of this \\n2 \\tec is not found in the preceding  \\n1 \\tec.			-		
12.7.3		para	n2		not(contains($pren1tec,$curtecverpreellipsis) and contains($pren1tec,$curtecpostellipsis)) 	$countpres5 < $countpren1 and $hastecchild and $hastecellipsis and $hastecversion			mid	err-para-n2-mid-12-7-3	The contents of this \\n2 \\tec is not found in the preceding  \\n1 \\tec.					
12.7.4		para	n2		not(contains($pren2tec,$curtecver) or contains($pren1tec,$curtecver))	$countpres5 < $countpren1 and $hastecchild and not($hastecellipsis) and $hastecversion			mid	err-para-n2-mid-12-7-4	The contents of this \\n2 \\tec is not found in the preceding  \\n1 \\tec.					
12.8.1		para	n2		$countpres5 > $countpren1	child::*[@style = 'tec']			pre	err-para-n2-pre-12-8-1	There is no \\n1 preceding this \\n2. It should be an \\n1.		XXD 12:4		SC: 16 Dec: added test at 12:4, not working	
12.8.2		para	n3	5	$countpres5 > $countpren2				pre	err-para-n3-pre-12-8-2	The \\n3 occurs before any \\n2 in this \\s5 note group		XXD 12:5; 12.7			
12.8.3	TRUE	para	n3		not(contains($pren1tec,$curtec))	$countpres5 < $countpren1			pre	err-para-n3-pre-12-8-3	This should be an \\n1 paragraph since the content is not found in the preceding \\n1 \\tec.			-		
12.9	TRUE	char	tec		($countpres5 < $countpren2) and ($countpres5 < $countpren1) and not($hasellipsis)	not(contains($pretec,.))			mid	err-char-tec-mid-12-9	The contents of this \\tec is not found in the preceding \\tec.			-		
12.9.1	TRUE	char	tec		$countpres5 < $countpren2 and $countpres5 < $countpren1 and $hasellipsis 	not(contains($pretec,$preellipsisstring) and contains($pretec,$postellipsisstring))			mid	err-char-tec-mid-12-9-1	The contents of this \\tec is not found in the preceding \\tec.			-		
13.1	TRUE	para	n3		not(*[@style = 'tec'])					err-para-n3--13-1	There should be a \\tec character style in this \\n3 paragraph	SC 5 Dec: This seems redundant with 13.2. Perhaps better would be to test for not two tec in one paragraph, like 10.1.		-		
13.2	TRUE	para	n3		not(node()[1] = *[@style = 'tec'])					err-para-n3--13-2	There should be text in \\tec formatting at the beginning of this paragraph			-		
14.1		para	n1		position() != last()	post=n1 n2 n3 ntn qp b b2 b3 p s5 li1 hb1 s3 c gra			post	err-para-n1-post-14-1	Only these paragraphs: \\n1 \\n2 \\n3 \\ntn \\qp \\b \\b2 \\b3 \\p \\s5 \\li1 \\hb1 \\s3 \\gra and \\c are allowed after a \\n1		XXD 14:1			
14.2		para	qp		preceding-sibling::*[1][@style = 'qp']				pre	err-para-qp-pre-14-2	Two \\qp paragraphs, one after the other, are not allowed, unless it is one example with two paragraphs		XXD 14:1			
17.1.1		char	tbb		text() = '_'					err-char-tbb--17-1-1	This \tbb __\tbb* has less than the required 2 underscore characers.		XXD 1:27			
17.1.2		char	tbb		text() = '___' or text() = '____'				mid	err-char-tbb-mid-17-1-2	This \tbb __\tbb* has more than 2 underscore characers.		XXD 1:27			
17.2		char	tbb	5	substring(preceding-sibling::node()[1],string-length(preceding-sibling::node()[1]),1) = ' '				pre	err-char-tbb-pre-17-2	There should not be a space before a \\tbb.		XXD 1:28			
17.3		char	tbb	10	substring(following-sibling::node()[1],1,1) = ' '				post	err-char-tbb-post-17-3	There should not be a space after a \\tbb*.		XXD 1:28			
18.1		para	ntn		pre=s3 s5 ntn tr ntn qp qns				pre	err-para-ntn-pre-18-1	An \\ntn should be preceeded by a \\s3, \\s5, \\tr, \\ntn, \\qp, or \\qns.		XXD 18:29-30			
19.1		para	s3	6	not(contains(text(),'General Comment on'))				mid	err-para-s3-mid-19-1	An \\s3 paragraph always starts with `General Comment on`		XXD 19:1		SC 2 Dec: @Neh 7:5b the text is correct but I still get the tag error. Also, the message should read 'An \\s3 paragraph always...'.	
19.2		para	s3	6	not($hascvref )				mid	err-para-s3-mid-19-2	This paragraph is missing a valid chapter verse reference, or the colon is missing.		XXD 19:1			
19.3		para	s3	5	$hascvref and $hasspacecref	$refwordschapcolon != $prechapter			mid	err-para-s3-mid-19-3	The chapter number in this \\s3 does not match the preceding \\c number.		XXD 19:1			
19.4		para	s3		not($prevhyphen) and not($refvendash) and not($hasvlet)	$refcolonv != $preverse			mid	err-para-s3-mid-19-4	The verse number in this \\s3 does not match the preceding \\v number.		XXD 19:1		SC 5 Dec: This seems to be catching the hyphen, but the message then needs to read: 'The hyphen in this \\s3 needs to be an en dash'	
19.4.1		para	s3		not($prevhyphen) and not($refvendash) and $hasvlet	$refcolonvlet != $preverse			mid	err-para-s3-mid-19-4-1	The verse number in this \\s3 does not match the preceding \\v number.		XXD 19:1			
19.5		para	s3		$hassubvrange and $hascvref 	$refcolonvlet != $preverse			mid	err-para-s3-mid-19-5	The verse number in this \\s3 does not match the preceding \\v number.		XXD 19:2			
19.6		para	s3		($refvendash  and ($lastchartype = '#')) or (contains($reftype,'#$–#')  and ($lastchartype = '#'))	$refcolonvr2 != $preverse			mid	err-para-s3-mid-19-6	The last verse number in the range in this \\s3 does not match the preceding \\v number.		XXD 19:2			
19.7		para	s3	5	$hascvref and $lastchartype  = '$'	$lastchar != substring($pres5text,string-length($pres5text),1)			mid	err-para-s3-mid-19-7	The ending verse part does not match the previous \\s5 verse part.	SC 21 Dec: Changed message. Otherwise OK.	XXD 19:2		2022-11-16 won't handle this range 5:6c-7==fixed now, 2022-12-16 test okay	
19.8		para	s3		post=ntn				mid	err-para-s3-mid-19-8	An \\s3 can only be followed by an \\ntn		XXD 19:2			
20.3		char	tec		*[@style = 'f']				mid	err-char-tec-mid-20-3	A \\tec cannot contain a footnote (\\f ...\\f*).		XXD 20:32		SC 6 Dec: not working. See XXD 1:32	
22.1		figure	fig	8	not($graparent)				pre	err-figure-fig-pre-22-1	This is not an \\gra paragraph. A \\fig must only occur in a \\gra paragraph		XXD 22:1-3			
22.11	TRUE	para		5	*[@style = 'fig']	not(@style = 'gra')			mid	err-para--mid-22-11	This is not an \\gra paragraph. A \\fig must only occur in a \\gra paragraph	IM 2023-02-28 22.1 is working so this is not needed now.		-		
22.2		para	gra	8	$countfig + $countf = 2	$countnode != 2			mid	err-para-gra-mid-22-2	This \\gra has all the required elements of \\fig, and a footnote but also has some other markup, extra spaces or text.	SC 6 Dec: This test does not seem to be working. Please make the message: 'This \\ntn must only have a \\fig and a footnote'.	XXD 22:4,8			
22.2.1		figure	fig		$curpos != 1				pre	err-figure-fig-pre-22-2-1	The \\fig must be the first item in a \\gra paragraph	SC 6 Dec: This test does not seem to be working. Please make the message: 'This \\ntn must only have a \\fig and a footnote'.	XXD 22:5			
22.2.2	TRUE	para	gra		$countfig + $countf = 2	$nodecount != 2				err-para-gra--22-2-2	This \\gra has all the required elements of \\fig, and a footnote but also has some other markup, extra spaces or text.	same as 22.2		-		
22.3		note	f		$graparent	not(preceding-sibling::*[1][@style = 'fig'] )			pre	err-note-f-pre-22-3	The sequence should be \\fig...\\fig*\\f...\\f*. Note no space after \\fig*.		XXD 22:6			
22.4		link	jmp		not($gjparent) and $containsclickhere				pre	err-link-jmp-pre-22-4	This \\jmp should occur as the only item in \\gj paragraph, that is immediately after a \\gra paragraph.		XXD 22:3-4			
22.5		note	f		@caller != '*'				pre	err-note-f-pre-22-5	The caller for the \\f must be *		XXD 22:7			
22.6		figure	fig	2	$hascoloncvref and not($hasspaceinref)	$refattchap != $prechapter			mid	err-figure-fig-mid-22-6	The referenced chapter number for the \\fig does not match the preceding \\c number.		XXD 22:9			
22.6.2		figure	fig	2	$hascoloncvref and $hasspaceinref				mid	err-figure-fig-mid-22-6-2	The reference in this \\fig should not contain a book code.		XXD 22:6			
22.6.3	TRUE	figure	fig	2	not($hascoloncvref) and not($hasspaceinref)	$refattchapdot != $prechapter			mid	err-figure-fig-mid-22-6-3	The referenced chapter number for the \\fig does not match the preceding \\c number.			-		
22.6.4	TRUE	figure	fig	2	not($hascoloncvref) and $hasspaceinref	substring-after($refattchapdot,' ') != $prechapter			mid	err-figure-fig-mid-22-6-4	The referenced chapter number for the \\fig does not match the preceding \\c number.			-		
22.7		figure	fig		$hascoloncvref and not($hasspaceinref)	$refattverse != $preverse			mid	err-figure-fig-mid-22-7-2	The referenced verse number for the \\fig does not match the preceding \\v number.		XXD 22:7			
22.7.2		figure	fig		not($hascoloncvref)				mid	err-figure-fig-mid-22-8	The reference should be in the form C:V, chapter number, then colon, then verse number. No book code.		XXD 22:1,3-8			
22.8		para	gra		$countfig + $countf = 1	$countf = 0			mid	err-para-gra-mid-22-8	This \\gra paragraph is missing the copyright footnote (\\f).		XXD 22:10			
22.9		para	gj		$countjmp = 0				mid	err-para-gj-mid-22-9	This \\gj paragraph is missing a jump link ( \\jmp).		XXD 22:11			
22.9.1		para	gj		$countnode != 1				mid	err-para-gj-mid-22-9-1	This \\gj paragraph should contain only one \\jmp item, and no other text or markup.		XXD22:12			
22.9.2		para	gj		pre=gra				pre	err-para-gj-pre-22-9-2	The paragraph preceding this \\gj paragraph is not a \\gra paragraph.		XXD 22:2,3			
22.10.		para	gra		$countfig + $countf = 1	$countfig = 0			mid	err-para-gra-mid-22-10-	This \\gra paragraph is missing a \\fig.		XXD 22:12			
23.1		para			not(@style = 'b') and not(@style = 'b2') 	string-length(text()) = 0 and count(*) = 0			mid	err-para--mid-23-1	This paragraph type should not be empty.		XXD 1:35, 23:1		SC 2 Dec: @Neh 3:1c, a \b2 also can and should only be blank. A \b should also only ever be blank. (This is a change from what I said before; we will be handling the 'Click here' jmp link in a \b differently soon.) Lastly, please flag a \b2 \b sequence with the message 'A \\b2 should not precede a \\b.' And flag a \b \b2 sequence with the message 'A \\b2 should not follow a \\b.'	
23.2		para	b2		following-sibling::*[1][@style = 'b']				pre	err-para-b2-pre-23-2	A \\b2 should not precede a \\b.		XXD 23:2			
23.3		para	b		following-sibling::*[1][@style = 'b2']				post	err-para-b-post-23-3	A \\b2 should not follow a \\b.		XXD 23:3			
23.4		para	b2		count(node()) > 0				mid	err-para-b2-mid-23-4	A \\b2 paragraph should be empty.		XXD 23:1			
23.5		para	b		count(node()) > 0				mid	err-para-b-mid-23-5	A \\b paragraph should be empty.		XXD 23:1			
24.1		para	ntn		char[@style = 'tec']				mid	err-para-ntn-mid-24-1	An \\ntn should not contain a \\tec.		XXD 24:1			
25.1	TRUE	para	n1		next-pair=n2 n3					err-para-n1--25-1				-		
26.1		para		5	contains(text(),$sq) or contains(text(),$dq) 				mid	err-para--mid-26-1	This paragraph contains a straight quote mark. It should be a curly quote mark.		XXD 26:1			
26.2		char		5	contains(text(),$sq) or contains(text(),$dq) 				mid	err-char--mid-26-2	This character SFM contains a straight quote mark. It should be a curly quote mark.		XXD 26:1			
26.3		cell			contains(text(),$sq) or contains(text(),$dq) 				mid	err-cell--mid-26-3	This table cell contains a straight quote mark. It should be a curly quote mark.		XXD 26:1			
										err----						
																
																
																
163	52															
111	-															